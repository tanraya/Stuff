title: "Работа с несколькими БД в Zend Framework и с иcпользованием Zend_Application"
tags:
- zend-framework
- zend_db
- zend_db_table

<body>
<p>Как работать с несколькими БД в ZF? Давайте посмотрим, начнем с конфигурационного файла. Вы ведь используете компонент <strong>Zend_Application</strong>? Тогда поехали.

Будем придерживаться правильного подхода в разработке приложений. Давайте создадим такой ini файл с настройками для Zend_Application. В конфиге будет одна общая секция, и 3 секции для разных сред выполнения нашего приложения - <em>development</em>, <em>test </em>и <em>production</em>. В каждой из этих секций мы сможем работать с несколькими БД одновременно.

~
Смотрим конфиг:

</p>
<div class="gist-wrapper"><script src="https://gist.github.com/1768743.js?file=gistfile1.ini"></script></div>

В общей секции (<em>bootstrap</em>) мы определяем общие настройки подключения к БД. В остальных секциях, мы указываем различные БД и реквизиты доступа, в зависимости от типа секции. Итак, на каждую стадию разработки приложения, такие как непосредственная разработка, тестирование, пуск в эксплуатацию у нас есть своя БД (или несколько, если требуется работать с несколькими БД одновременно).

Видели в конфиге ресурс <em>dbs</em>? Да, у нас нет такого ресурса. Придется его создать. Я взял этот код с сайта <a href="http://blog.keppens.biz" rel="noindex,nofollow">blog.keppens.biz</a>.

Вот, как выглядит ресурс, дающий нам возможность работать с несколькими БД:

<div class="gist-wrapper"><script src="https://gist.github.com/1768748.js?file=gistfile1.php"></script></div>

Теперь, в нашем файле Bootstrap, нам нужно запустить наш ресурс:

<div class="gist-wrapper"><script src="https://gist.github.com/1768750.js?file=gistfile1.php"></script></div>

Как видно, мы поместили адаптеры БД в реестр, откуда можем получить их в любой части приложения. По-умолчанию будет использоваться адаптер №1 - <em>db</em>, мы указали это в конфиге при помощи опции <em>isDefaultTableAdapter</em>. То есть, например, <em>Zend_Db_Table</em> по-умолчанию будет работать именно с первым адаптером.

Это все, что вам нужно сделать, чтобы работать с несколькими БД в Zend Framework.
Спрашивайте в комментах, если что-то непонятно.
</body>
