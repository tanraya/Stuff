title: "Дефолтный маршрут в Zend Framework. Некоторые тонкости."
tags:
- default-route
- routing
- zend-framework

<body>
<p>По-умолчанию в схеме маршрутизации <strong>Zend Framework</strong> используется дефолтный маршрут. Он добавляется непосредственно перед началом процесса маршрутизации, в методе<em> Zend_Controller_Router_Rewrite::route()</em>

Дефолтный маршрут - это объект класса <em>Zend_Controller_Router_Route_Module</em>. При создании этого объекта в его конструктор передаются объекты диспетчера и запроса.

И тут есть такая тонкость: в конструкторе объекта дефолтного маршрута параметры диспетчера и запроса указаны как необязательные. Может возникнуть предположение, что если в конструктор не были переданы эти объекты, то они автоматически инициализируются внутри дефолтного роута. Так вот - это не так.

Если вы собрались переопределить <em>Zend_Controller_Router_Route_Module</em>, то не забывайте при инстанцировании своего класса всегда передавать в него диспетчер и объект запроса - иначе долго будете искать ошибку, почему ничего не работает (как я искал):
</p>
<div class="gist-wrapper"><script src="https://gist.github.com/1768702.js?file=gistfile1.php"></script></div>
Мне не ясно, почему разработчики <em>ZF</em> сделали опциональными те два параметра. По-моему, их стоило бы сделать обязательными, тогда таких ошибок можно было бы не допускать.</body>
