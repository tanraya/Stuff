title: "Сортировка по значению массивов и выборок из БД"
tags:
- mysql
- php

<body>
<p>Для кого-то эта статья покажется тривиальной, но новички могут открыть для себя что-то новое. В любом случае, советую почитать.

Иногда бывает нужно сделать сортировку списка по значению какого-то поля из этого списка. Поясню. Например, у вас есть список дел, каждое дело в списке помечено приоритетом. Бывают приоритеты (самый приоритетный, приоритетный, средний приоритет, низкий приоритет и самый низкий приоритет).

Давайте посмотрим это на примере таблицы <em>mysql</em>. Создадим таблицу:

</p>
<div class="gist-wrapper"><script src="https://gist.github.com/1768723.js?file=gistfile1.sql"></script></div>

и добавим в нее данные:

<div class="gist-wrapper"><script src="https://gist.github.com/1768727.js?file=gistfile1.sql"></script></div>

~
<h3>Сортировка выборки из таблицы mysql по-значению</h3>

Теперь давайте напишем запрос, который выведет нам записи из таблицы от самого высокого приоритета (он будет сверху), до самого низкого (соответственно, он будет в самом низу):

<div class="gist-wrapper"><script src="https://gist.github.com/1768729.js?file=gistfile1.sql"></script></div>

В итоге, мы получим такой список:

<table cellspacing="1" cellpadding="2" border="1">
<tr>
<th>id</th>
    <th>priority</th>
    <th>title</th>
</tr>
<tr>
<td>4</td>
    <td>highest</td>
    <td>Захватить мир</td>
</tr>
<tr>
<td>6</td>
    <td>hight</td>
    <td>Прыгнуть с парашютом</td>
</tr>
<tr>
<td>7</td>
    <td>medium</td>
    <td>Поспать</td>
</tr>
<tr>
<td>1</td>
    <td>medium</td>
    <td>Выгулять собаку</td>
</tr>
<tr>
<td>3</td>
    <td>medium</td>
    <td>Сходить в магазин</td>
</tr>
<tr>
<td>5</td>
    <td>low</td>
    <td>Прочитать Ремарка</td>
</tr>
<tr>
<td>2</td>
    <td>lowest</td>
    <td>Полить кактус</td>
</tr>
</table>

Таким способом, как этот, можно легко сделать функциональность "прикрепленные темы" в форуме - те темы, которые находятся всегда наверху в списке тем.

<h3>Сортировка массивов php по значению</h3>

Теперь представим, что у нас есть те же данные, что и в вышеприведенной таблице mysql, но теперь в виде php-массива. Нам требуется отсортировать этот массив так же, как и выборку из таблицы. Посмотрим, как выглядит сам массив:

<div class="gist-wrapper"><script src="https://gist.github.com/1768731.js?file=gistfile1.php"></script></div>

Теперь посмотрим на код, сортирующий массив. Главная фишка находится в функции-коллбэке - там мы задаем порядок, в котором будут сортироваться записи.

<div class="gist-wrapper"><script src="https://gist.github.com/1768733.js?file=gistfile1.php"></script></div>

После того, как код отработает, мы получим отсортированный массив:

<div class="gist-wrapper"><script src="https://gist.github.com/1768736.js?file=gistfile1.php"></script></div>

Надеюсь, кто-нибудь узнал что-то новое для себя :)
Буду рад комментариям.</body>
